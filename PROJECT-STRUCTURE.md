# Project Structure Guide

This document explains the organization of the Squarespace Design Components codebase.

## Directory Overview

```
sqs-design/
│
├── components/          # UI Components (feature-based organization)
├── core/               # Core utilities & shared functionality
├── data/               # Data files (JSON, configuration)
├── docs/               # Documentation
├── loaders/            # Generated loader files (auto-generated)
├── scripts/            # Build scripts & utilities
├── test/              # Local testing files
└── package.json        # Project configuration
```

## Detailed Structure

### `/components` - UI Components

Each component is self-contained in its own folder:

```
components/
├── component-name/
│   ├── component-name.css          # Component styles
│   ├── component-name.js           # Component logic
│   └── component-name-loader.html  # Squarespace-ready HTML
```

**Current Components:**
- `fortune-peach/` - Interactive fortune widget
- `portfolio-uiux/` - Portfolio showcase
- `twin-gallery/` - Side-by-side gallery

**Guidelines:**
- One component per folder
- Use kebab-case for folder names
- Each component must have CSS, JS, and loader HTML
- Loader HTML includes component description in comments

### `/core` - Core Utilities

Shared functionality and base utilities:

```
core/
├── component-loader.js    # Dynamic component loader (priority)
├── utilities.js          # Shared utilities (loads first)
├── *.css                 # Core stylesheets
└── *.js                  # Core JavaScript modules
```

**File Priority:**
1. `utilities.js` - Loads first (other scripts may depend on it)
2. `component-loader.js` - Loads second
3. Other core files - Loaded alphabetically

**Guidelines:**
- Core files are shared across components
- Utilities should be reusable functions
- Keep core files independent of components

### `/data` - Data Files

Configuration and data files:

```
data/
└── portfolio-projects.json  # Portfolio project data
```

**Guidelines:**
- JSON format for easy editing
- One data file per feature/component
- Validated by build scripts
- Human-readable and version-control friendly

### `/docs` - Documentation

Organized documentation:

```
docs/
├── components/          # Component-specific docs
│   └── portfolio/      # Portfolio component docs
├── guides/             # Usage guides
└── *.md                # Overview documentation
```

**Documentation Types:**
- **Component Docs**: Component-specific usage, APIs, examples
- **Guides**: Step-by-step setup instructions
- **Overview**: High-level architecture and concepts

### `/loaders` - Generated Files

Auto-generated loader files (do not edit manually):

```
loaders/
├── global-css-loader.html      # CSS loader for Squarespace
├── global-js-loader.html       # JS loader for Squarespace
├── components-registry.json    # Component metadata
├── components-registry.md      # Human-readable registry
├── COMPONENT-SYNTAX.md         # Component syntax reference
└── COMPONENT-SYNTAX.txt         # Plain text syntax reference
```

**Guidelines:**
- All files auto-generated by `npm run generate-loaders`
- Files are committed (needed for Squarespace deployment)
- Regenerate after adding/modifying components

### `/scripts` - Build Scripts

Automation and build tools:

```
scripts/
├── generate-loaders.js         # Generate loader files
├── build-portfolio-data.js     # Build portfolio HTML
├── add-portfolio-project.js    # Interactive project adder
└── generate-portfolio-entry.js # Legacy entry generator
```

**Guidelines:**
- One script per task
- Scripts are executable and well-documented
- Use npm scripts to run (see package.json)

### `/test` - Testing

Local testing files:

```
test/
├── index.html          # Manual test page
├── index-auto.html     # Auto-loading test page
└── components.js       # Test utilities
```

**Usage:**
- Run `npm run serve` to start local server
- Test components before deploying to Squarespace
- Auto-updated by build scripts

## File Naming Conventions

### Components
- **Folders**: `kebab-case` (e.g., `fortune-peach`)
- **CSS**: `component-name.css`
- **JS**: `component-name.js`
- **Loader HTML**: `component-name-loader.html`

### Core Files
- **CSS**: Descriptive name (e.g., `header.css`, `mobile-menu.css`)
- **JS**: Descriptive name with `.js` extension

### Scripts
- Use descriptive names (e.g., `generate-loaders.js`)
- Include `.js` extension
- Document purpose in file header

## Path Conventions

### URLs (in loaders)
- Base URL: `https://assets.peachless.design`
- Core files: `/core/filename.css` or `/core/filename.js`
- Component files: `/components/component-name/filename.css`

### File Paths (in scripts)
- Use `path.join(__dirname, '..', 'directory')` for relative paths
- Always use forward slashes in URLs
- Keep paths consistent across scripts

## Adding New Components

1. **Create folder**: `components/your-component-name/`
2. **Add files**:
   - `your-component-name.css`
   - `your-component-name.js`
   - `your-component-name-loader.html`
3. **Add metadata**: Include description in loader HTML comments
4. **Generate loaders**: Run `npm run generate-loaders`
5. **Test**: Use `npm run serve` to test locally

## Maintenance Guidelines

### Regular Tasks
- **After adding components**: Run `npm run generate-loaders`
- **After editing portfolio data**: Run `npm run portfolio-build`
- **Before committing**: Validate with `npm run portfolio-validate`

### Version Control
- ✅ Commit source files (components, core, data)
- ✅ Commit generated loaders (needed for deployment)
- ✅ Commit documentation
- ⚠️ Consider ignoring build artifacts if using CI/CD

### Scaling
- Keep components independent
- Use core utilities for shared functionality
- Document component dependencies
- Maintain consistent structure

## Best Practices

1. **Separation of Concerns**
   - Components are independent
   - Core utilities are shared
   - Data is separate from presentation

2. **Automation**
   - Use scripts for repetitive tasks
   - Auto-generate what can be auto-generated
   - Validate data before building

3. **Documentation**
   - Document components in loader HTML
   - Keep docs organized by feature
   - Update docs when structure changes

4. **Consistency**
   - Follow naming conventions
   - Keep structure uniform
   - Use consistent code style

## Troubleshooting

### Scripts not finding files
- Check paths in scripts match directory structure
- Verify files exist in expected locations
- Run scripts from project root

### Loaders not updating
- Run `npm run generate-loaders`
- Check script has correct paths
- Verify component folders follow structure

### Components not loading
- Check loader HTML includes correct paths
- Verify base URL is correct
- Check browser console for errors

---

For more details, see:
- `README.md` - Project overview
- `docs/` - Component documentation
- Individual script files for build process details

